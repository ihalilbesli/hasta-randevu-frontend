<!-- ğŸ”˜ Randevulu / Randevusuz ButonlarÄ± -->
<div class="form-group">
  <button (click)="selectPatientMode('today')" [disabled]="patientMode === 'today'">
    <i class="fa-solid fa-calendar-check"></i> Randevulu Hastalar
  </button>
  <button (click)="selectPatientMode('all')" [disabled]="patientMode === 'all'">
    <i class="fa-solid fa-users"></i> Randevusuz Hastalar
  </button>
</div>

<!-- ğŸ‘¤ Hasta SeÃ§imi -->
<div class="form-group">
  <label><i class="fa-solid fa-user-injured"></i> Hasta SeÃ§in:</label>
  <select [(ngModel)]="selectedPatientId" (change)="onPatientChange()">
    <option [ngValue]="null">-- Hasta SeÃ§in --</option>
    <option *ngFor="let patient of patients" [ngValue]="patient.id">
      {{ patient.name }} {{ patient.surname }}
    </option>
  </select>
</div>

<!-- ğŸ”˜ GeÃ§iÅŸ ButonlarÄ± -->
<div *ngIf="selectedPatientId && activeTab === ''" class="form-group">
  <button *ngIf="patientMode === 'today'" (click)="activeTab = 'write'">
    <i class="fa-solid fa-prescription"></i> ReÃ§ete Yaz
  </button>
  <button (click)="selectListTab()">
    <i class="fa-solid fa-file-medical"></i> ReÃ§eteleri GÃ¶r
  </button>
</div>

<!-- ğŸ“ ReÃ§ete Yazma Formu -->
<div *ngIf="selectedPatientId && activeTab === 'write'" class="tab-content">
  <button (click)="activeTab = ''">
    <i class="fa-solid fa-arrow-left"></i> Geri
  </button>
  <h2><i class="fa-solid fa-prescription-bottle-medical"></i> Yeni ReÃ§ete Yaz</h2>

  <div class="form-group">
    <label><i class="fa-solid fa-pills"></i> Ä°laÃ§lar:</label>
    <input type="text" [(ngModel)]="medications" placeholder="Ä°laÃ§larÄ± virgÃ¼lle ayÄ±rarak yazÄ±n" />
  </div>

  <div class="form-group">
    <label><i class="fa-solid fa-note-sticky"></i> AÃ§Ä±klama:</label>
    <textarea [(ngModel)]="description" placeholder="AÃ§Ä±klama girin"></textarea>
  </div>

  <button (click)="createPrescription()">
    <i class="fa-solid fa-plus"></i> ReÃ§ete OluÅŸtur
  </button>
</div>

<!-- ğŸ“„ ReÃ§eteler Listesi -->
<div *ngIf="activeTab === 'list'" class="tab-content">
  <button (click)="activeTab = ''">
    <i class="fa-solid fa-arrow-left"></i> Geri
  </button>
  <h2><i class="fa-solid fa-file-medical-alt"></i> ReÃ§etelerim</h2>

  <div class="filter-group">
    <input type="text" [(ngModel)]="searchKeyword" (input)="searchPrescriptions()" placeholder="AÃ§Ä±klamada Ara" />
    <select [(ngModel)]="filterPeriod" (change)="filterPrescriptions()">
      <option value="all">TÃ¼m Zamanlar</option>
      <option value="day">Son 1 GÃ¼n</option>
      <option value="week">Son 1 Hafta</option>
      <option value="month">Son 1 Ay</option>
      <option value="year">Son 1 YÄ±l</option>
    </select>
  </div>

  <div *ngIf="prescriptions.length === 0">
    <p><i class="fa-solid fa-circle-exclamation"></i> HenÃ¼z yazÄ±lmÄ±ÅŸ bir reÃ§eteniz bulunmamaktadÄ±r.</p>
  </div>

  <div *ngFor="let prescription of prescriptions" class="prescription-card">
    <p><strong>ğŸ‘¤ Hasta:</strong> {{ prescription.patient?.name }} {{ prescription.patient?.surname }}</p>
    <p><strong>ğŸ’Š Ä°laÃ§lar:</strong> {{ prescription.medications }}</p>
    <p><strong>ğŸ“ AÃ§Ä±klama:</strong> {{ prescription.description }}</p>
    <p><strong>ğŸ“… Tarih:</strong> {{ prescription.date }}</p>
    <button (click)="deletePrescription(prescription.id)">
      <i class="fa-solid fa-trash"></i> Sil
    </button>
  </div>
</div>
