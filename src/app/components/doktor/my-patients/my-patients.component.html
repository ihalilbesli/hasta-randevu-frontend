<app-header></app-header>

<h2>ğŸ“‹ HastalarÄ±m</h2>

<!-- ğŸ” Arama Kutusu -->
<div class="search-bar">
  <input [(ngModel)]="searchQuery" (input)="searchPatients()" placeholder="Ad veya e-posta ile ara..." />
  <select [(ngModel)]="searchType">
    <option value="name">Ä°sme gÃ¶re</option>
    <option value="email">E-posta ile</option>
  </select>
</div>

<!-- âŒ Hasta yoksa -->
<div *ngIf="filteredPatients.length === 0" class="empty-message">
  KayÄ±tlÄ± hasta bulunamadÄ±.
</div>

<!-- ğŸ§¾ Hasta Listesi -->
<div *ngFor="let patient of filteredPatients" class="patient-card">
  <h3>{{ patient.name }} {{ patient.surname }}</h3>
  <p>ğŸ“§ {{ patient.email }}</p>
  <p>ğŸ“± {{ patient.phoneNumber }}</p>
  <p>ğŸ¥ Klinik: {{ patient.clinic?.name || '-' }}</p>
  <p>ğŸ‚ DoÄŸum: {{ patient.birthDate || '-' }} | ğŸ©¸ Kan Grubu: {{ patient.bloodType || '-' }}</p>

  <!-- ğŸ”¢ Ä°statistikler -->
  <div class="stats">
    <p>ğŸ“… Randevu: {{ patient.appointmentCount || 0 }}</p>
    <p>ğŸ’Š ReÃ§ete: {{ patient.prescriptionCount || 0 }}</p>
    <p>ğŸ§ª Test: {{ patient.testResultCount || 0 }}</p>
    <p>ğŸ“š GeÃ§miÅŸ: {{ patient.historyCount || 0 }}</p>
    <p>ğŸ“„ Rapor: {{ patient.reportCount || 0 }}</p>
  </div>

  <!-- âš¡ KÄ±sayol ButonlarÄ± -->
 <div class="actions">
  <button (click)="goToPrescription(patient.id)">ğŸ“ ReÃ§ete Yaz</button>
  <button (click)="goToTest(patient.id)">ğŸ§ª Test Sonucu Ekle</button>
  <button (click)="goToHistory(patient.id)">ğŸ“š GeÃ§miÅŸ GÃ¶r</button>
  <button (click)="goToReport(patient.id)">ğŸ“„ RaporlarÄ± GÃ¶r</button>
</div>
</div>
