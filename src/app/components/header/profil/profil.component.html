<app-header></app-header>

<!-- KÄ°MLÄ°K BÄ°LGÄ°LERÄ° -->
<div *ngIf="activeTab === 'identity'" class="tab-panel">
  <h3>KiÅŸisel Bilgiler</h3>

  <div *ngIf="!isEditingIdentity">
    <p><strong>Ad:</strong> {{ profileData.name }}</p>
    <p><strong>Soyad:</strong> {{ profileData.surname }}</p>
    <p><strong>Cinsiyet:</strong> {{ profileData.gender }}</p>
    <p><strong>DoÄŸum Tarihi:</strong> {{ profileData.birthDate }}</p>
    <p><strong>Kan Grubu:</strong> {{ profileData.bloodType }}</p>
    <p><strong>Kronik RahatsÄ±zlÄ±klar:</strong> {{ profileData.chronicDiseases }}</p>
    <button (click)="isEditingIdentity = true">âœï¸ DÃ¼zenle</button>
  </div>

  <div *ngIf="isEditingIdentity">
    <label>Ad:</label>
    <input [(ngModel)]="profileData.name"><br>

    <label>Soyad:</label>
    <input [(ngModel)]="profileData.surname"><br>

    <label>Cinsiyet:</label>
    <select [(ngModel)]="profileData.gender">
      <option value="ERKEK">Erkek</option>
      <option value="KADIN">KadÄ±n</option>
      <option value="BELIRTILMEMIS">BelirtilmemiÅŸ</option>
    </select><br>

    <label>DoÄŸum Tarihi:</label>
    <input type="date" [(ngModel)]="profileData.birthDate"><br>

    <label>Kan Grubu:</label>
    <select [(ngModel)]="profileData.bloodType">
      <option *ngFor="let type of ['ARH_POS','ARH_NEG','BRH_POS','BRH_NEG','ABRH_POS','ABRH_NEG','ORH_POS','ORH_NEG']" [value]="type">
        {{ type }}
      </option>
    </select><br>

    <label>Kronik RahatsÄ±zlÄ±klar:</label>
    <textarea [(ngModel)]="profileData.chronicDiseases"></textarea><br>

    <button (click)="saveIdentity()">ğŸ’¾ Kaydet</button>
    <button (click)="cancelEdit('identity')">âŒ Ä°ptal</button>
  </div>
</div>

<!-- Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° -->
<div *ngIf="activeTab === 'contact'" class="tab-panel">
  <h3>Ä°letiÅŸim Bilgileri</h3>

  <div *ngIf="!isEditingContact">
    <p><strong>Telefon:</strong> {{ profileData.phoneNumber }}</p>
    <p><strong>E-Posta:</strong> {{ profileData.email }}</p>
    <button (click)="isEditingContact = true">âœï¸ DÃ¼zenle</button>
  </div>

  <div *ngIf="isEditingContact">
    <label>Telefon:</label>
    <input [(ngModel)]="profileData.phoneNumber"><br>

    <label>E-Posta:</label>
    <input [value]="profileData.email" disabled><br>

    <button (click)="saveContact()">ğŸ’¾ Kaydet</button>
    <button (click)="cancelEdit('contact')">âŒ Ä°ptal</button>
  </div>
</div>

<!-- PAROLA BÄ°LGÄ°LERÄ° -->
<div *ngIf="activeTab === 'password'" class="tab-panel">
  <h3>Parola Ä°ÅŸlemleri</h3>

  <label>GeÃ§erli ParolanÄ±z:</label>
  <div class="input-group">
    <input [type]="showOldPassword ? 'text' : 'password'" [(ngModel)]="oldPassword" />
    <img src="assets/icons/{{ showOldPassword ? 'show' : 'hide' }}.png" class="toggle-icon" (click)="togglePassword('old')" />
  </div>

  <label>Yeni Parola:</label>
  <div class="input-group">
    <input [type]="showNewPassword ? 'text' : 'password'" [(ngModel)]="newPassword" />
    <img src="assets/icons/{{ showNewPassword ? 'show' : 'hide' }}.png" class="toggle-icon" (click)="togglePassword('new')" />
  </div>

  <label>Yeni Parola (Tekrar):</label>
  <div class="input-group">
    <input [type]="showRepeatPassword ? 'text' : 'password'" [(ngModel)]="newPasswordRepeat" />
    <img src="assets/icons/{{ showRepeatPassword ? 'show' : 'hide' }}.png" class="toggle-icon" (click)="togglePassword('repeat')" />
  </div>

  <button (click)="changePassword()">ParolayÄ± GÃ¼ncelle</button>
</div>
