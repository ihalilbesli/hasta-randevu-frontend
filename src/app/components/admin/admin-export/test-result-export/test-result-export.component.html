<h3><i class="fa-solid fa-vial-circle-check"></i> Test Sonuçları Verileri</h3>

<table *ngIf="testResults.length > 0">
  <thead>
    <tr>
      <th><i class="fa-solid fa-hashtag"></i> ID</th>
      <th><i class="fa-solid fa-user"></i> Hasta</th>
      <th><i class="fa-solid fa-user-doctor"></i> Doktor</th>
      <th><i class="fa-solid fa-calendar-check"></i> Test Tarihi</th>
      <th><i class="fa-solid fa-flask"></i> Test Adı</th>
      <th><i class="fa-solid fa-vials"></i> Test Türü</th>
      <th><i class="fa-solid fa-check-double"></i> Sonuç</th>
      <th><i class="fa-solid fa-comments"></i> Doktor Yorumu</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let result of testResults">
      <td>{{ result.id }}</td>
      <td>{{ result.patient?.name }} {{ result.patient?.surname }}</td>
      <td>{{ result.doctor?.name }} {{ result.doctor?.surname }}</td>
      <td>{{ result.testDate }}</td>
      <td>{{ result.testName }}</td>
      <td>{{ result.testType }}</td>
      <td>{{ result.result }}</td>
      <td>{{ result.doctorComment || '-' }}</td>
    </tr>
  </tbody>
</table>

<button (click)="downloadCSV()" class="download-btn">
  <i class="fa-solid fa-file-csv"></i> CSV Olarak İndir
</button>
