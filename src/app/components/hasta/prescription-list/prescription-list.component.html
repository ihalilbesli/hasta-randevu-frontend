
<app-ai-chat></app-ai-chat>

<div class="prescription-list-container">
  <h2>ğŸ“„ ReÃ§etelerim</h2>

  <div class="filters">
    <label>
      Zaman Filtresi:
      <select [(ngModel)]="selectedPeriod" (change)="fetchPrescriptions()">
        <option value="all">TÃ¼mÃ¼</option>
        <option value="day">Son 1 GÃ¼n</option>
        <option value="week">Son 1 Hafta</option>
        <option value="month">Son 1 Ay</option>
        <option value="year">Son 1 YÄ±l</option>
      </select>
    </label>

    <label>
      Anahtar Kelime:
      <input type="text" [(ngModel)]="keyword" (input)="search()" placeholder="AÃ§Ä±klamada ara..." />
    </label>
  </div>

  <div *ngIf="filteredPrescriptions.length > 0">
    <div class="prescription-card" *ngFor="let p of filteredPrescriptions">
      <div class="card-header">
        <div class="info">
          <div><strong>ğŸ“„ Kod:</strong> {{ p.prescriptionCode }}</div>
          <div><strong>ğŸ“… Tarih:</strong> {{ p.date | date:'dd.MM.yyyy HH:mm' }}</div>
          <div><strong>ğŸ‘¨â€âš•ï¸ Doktor:</strong> {{ p.doctor.name }} {{ p.doctor.surname }}</div>
        </div>
        <button class="toggle-btn" (click)="p.showDetails = !p.showDetails">
          {{ p.showDetails ? 'DetaylarÄ± Gizle' : 'DetaylarÄ± GÃ¶r' }}
        </button>
      </div>

      <div class="card-details" *ngIf="p.showDetails">
        <table>
          <thead>
            <tr>
              <th>Ä°laÃ§lar</th>
              <th>AÃ§Ä±klama</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ p.medications }}</td>
              <td>{{ p.description }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <p *ngIf="filteredPrescriptions.length === 0" class="no-data-msg">
    GÃ¶sterilecek reÃ§ete bulunamadÄ±.
  </p>
</div>
