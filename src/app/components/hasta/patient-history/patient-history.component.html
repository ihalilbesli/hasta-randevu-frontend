<app-header></app-header>
<app-ai-chat></app-ai-chat>
<div class="history-container">
    <h2>ğŸ©º SaÄŸlÄ±k GeÃ§miÅŸim</h2>
  
    <div class="filters">
      <label>
        Zaman Filtresi:
        <select [(ngModel)]="selectedPeriod" (change)="loadHistories()">
          <option value="all">TÃ¼mÃ¼</option>
          <option value="day">Son 1 GÃ¼n</option>
          <option value="week">Son 1 Hafta</option>
          <option value="month">Son 1 Ay</option>
          <option value="year">Son 1 YÄ±l</option>
        </select>
      </label>
  
      <label>
        <select [(ngModel)]="searchField">
          <option value="diagnosis">TanÄ±ya GÃ¶re</option>
          <option value="treatment">Tedaviye GÃ¶re</option>
        </select>
        <input type="text" [(ngModel)]="searchKeyword" (input)="search()" placeholder="Kelimeyle ara..." />
      </label>
    </div>
  
    <table *ngIf="filteredHistories.length > 0">
      <thead>
        <tr>
          <th>Tarih</th>
          <th>TanÄ±</th>
          <th>Tedavi</th>
          <th>Not</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let history of filteredHistories">
         <td>{{ history.date | date:'dd/MM/yyyy' }}</td>
          <td>{{ history.diagnosis }}</td>
          <td>{{ history.treatment }}</td>
          <td>{{ history.notes || '---' }}</td>
        </tr>
      </tbody>
    </table>
  
    <p *ngIf="filteredHistories.length === 0">GeÃ§miÅŸ bilgisi bulunamadÄ±.</p>
  </div>
  